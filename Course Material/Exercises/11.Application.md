# Exercise: Devtool, Create a patch

## Learning outcome
* Learn how to use Devtool 
* Explore more of the extended SDK.

`Devtool`  is part of the extended SDK. Extended SDK makes it relatively easier to work with patches and other stuff.
## Part 0 - Getting started

1. What devtool command can you use to extract a recipe?

   <details>
   <summary>hint</summary>
   Read the devtool help text
</details>
  <details>
	   <summary>Answer</summary>
	`devtool modify` is used to extract a recipe 
   </details>


2. Once extracted, where can you find the source code of the recipe?
  <details>
   <summary>Answer</summary>
	 `/home/yocto/work/poky/poky/build/workspace/sources/`
   </details>

3. Which variables in recipe metadata should we modify to add a patch to a recipe?
  <details>
	   <summary>Answer</summary>
		- `SRC_URI` should be updated with the patch details to include it in our recipe.
   </details>

## Part 1 - Extracting the kernel with Devtool

4. Now we need to extract the linux kernel? Can you find how it looks like?
  <details>
	   <summary>Answer</summary>
	- `devtool modify linux-yocto`
</details>
The command will extract the recipe to `/home/yocto/work/poky/poky/build/workspace/sources/`

5. Open this location in VSCODE and see how the kernel source code looks like!!
## Part 2 - Making changes
- Changes can be made to the recipe's source code. 
- For the sake of this exercise, we will add some comments to the kernel's source.

6. Try adding some comments to these files below and more if you feel like.

	1. Makefile`
	2. driver/amba/bus.c `
	3. drivers/fpga/altera-cvp.c
7. Check the `git status`, you will note the modified files!
## Part 3 Building with Devtool

* Like bitbake `devtool` can also be used for building a recipe. The command used to do this  is `devtool build recipe-name`
8. So try to build the changes with devtool for `linux-yocto` recipe

  <details>
	   <summary>Answer</summary>
	- `devtool build linux-yocto`
</details>
   

## Part 4 Creating a patch
* Now try to add these changes using `git add .`
  * Its time to commit, give an appropriate message using the command 
     `git commit -m message`
9. Generate the patch using 
*  `devtool update-recipe linux-yocto`


## Part 5 Observing the Patch


* This would create a patch and update the recipe, note the name of the recipe at the end of the process.
10. Go to `/home/yocto/work/poky/poky/meta/recipes-kernel/linux` . Can you find this file? and is it added to our SRC_URI?
* Devtool is super nice, it would create a patch and automatically update it in our recipe.
11. How does the patch file look like? What info can you infer from it?

## Part 2 - Additional Uses of Devtool!

### Find a recipe
- `devtool find-recipe recipename will find a recipe.

12. Can you use devtool tool find where the `inventory` recipe is located?
	- How about the recipe `bbexample`

### Rename a recipe
 `devtool rename recipe`
13. Rename the recipe `bbexmple`  to `newexample` using devtool!



