# Exercise 9: Best Practices
## Learning Outcome 

* Lean how to identify what licenses are being used by what recipe.
* Learn how to satisfy Copy-left /GPLv3 Compliance
* Best practices such as 
	* Creating a custom Distro
	* Enabling build-info
	* Using Extended SDK
	* Reducing the number of layers.

## Part 1: Licensing

* Being aware of licensing is crucial to avoid any potential copyright issues when we develop software.
1. Poky being a good Samaritan builds the license manifest in a specific folder can you identify which folder it is ?

   <details>
   <summary>hint</summary>
   Maybe it is somwhere inside the tmp folder?
</details>
  <details>
	   <summary>Answer</summary>
	`~/work/poky/poky/build/tmp/deploy/license` is where we find licensing information for all the packages!
   </details>

2. If lets say i want to a recipe to my commercial build which of the following license should i be careful about? `GPL-2.0-only, GPL-3.0-or-later, MIT, Apache-2.0`
   <details>
   <summary>Answer</summary>
`GPL-2.0-only` and GPL-3.0 or later` are dangerous
</details>

3. If i am creating a new recipe and i want to give a different license to it. Where can i find the md5sum for the license that is needed by the `LIC_FILE_CHKSUM` metadata?

   <details>
   <summary>hint</summary>
   check the `meta` layer
</details>
  <details>
	   <summary>Answer</summary>
	- /home/yocto/work/poky/poky/meta/files/common-licenses
	- and then we can run md5sum
   </details>

### Compliance Check

* In the `meta-exercises/recipes-licensing`, i have created a bash file `findLicenses.sh` which would could roughly help us get an idea of licenses included in a package. This takes the name of the license as an argument.
4. Can you find the recipes which have `MIT` license with it?

  <details>
	   <summary>Answer</summary>
	- ./findLicenses MIT
	
   </details>

5. How about the packages that are potentially problematic  such as `GPL-3.0`or `LGPL` for commercial use?
  <details>
	   <summary>Answer</summary>
	-  `./findLicenses GPL-3.0`
   </details>


## Part 2: CopyLeft Compliance

Copy left project have the following obligation 
- The source code of the project
- The license for the project
- Any modification to the project
- Any script that is required to configure and build

6. How can we provide the source code for the project? 

   <details>
   <summary>hint</summary>
   we inherit something
</details>
  <details>
	   <summary>Answer</summary>
    -  `INHERIT += "archiver"`
    - `ARCHIVER_MODE[src] = "original"`
   </details>
7. How can we provide the source modifications?

  <details>
	   <summary>Answer</summary>
    - `ARCHIVER_MODE[src] = "patched"`
   </details>

8. How can we provide the licensing text?
  <details>
	   <summary>Answer</summary>
    - `COPY_LIC_MANIFEST = "1"`
    - 'COPY_LIC_DIRS = "1"'`
   </details>

## Part 3 :  Best Practices

9. Until now, we have been violating a best practice that has been so obvious. This is a violation that makes us loose all our data if there is an update to our code. What can we do to mitigate this mistake?
   <details>
   <summary>hint</summary>
   Is all our metadata versioncontrolled?
</details>
  <details>
	   <summary>Answer</summary>
	- Local.conf is not version controlled, so we should remove the changes from local.conf and isntead move it our distro and image recipes instead!
   </details>

10. Poky is a great source of reference, can we just use poky to build our images?

   <details>
   <summary>hint</summary>
   Look at the Learning outcome
</details>
  <details>
	   <summary>Answer</summary>
	We have to transition to a custom distro and we cannot use poky as it has a lot of unnecessary packages.
   </details>

11. Poky gave us two of the best practices for free and we didn't even have to look for them. One was the `buildinfo` and the other `bill of materials`, how can we enable them in our `custom distro`?
  <details>
	   <summary>Answer</summary>
	INHERIT += "create-spdx"
	`inherit image-buildinfo`
	
   </details>

12.  Devtool is part of the extended sdk, what are included in the original standard SDK?

  <details>
	   <summary>Answer</summary>
	QEMU
	 bitbake
	 
	
   </details>


13. Imagine you are now a yocto developer who is working on building an image for raspberry pi,  you find the recipes you need, should you create new layers for each of the raspberry variant or should you use the existing layers? 