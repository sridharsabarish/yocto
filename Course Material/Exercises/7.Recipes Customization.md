# Exercise 7: Yocto Customizing Recipe #Notdone 

# Learning outcome #refined #minoreview

* Learn how to extend an existing Recipe with a ".bbappend" file
* Learn how to create a patch for your recipe.
* Learn how to add package configuration to your recipes.
# Todo


- [ ]  add something with overrdies #todo 


## Part 0 : Whats been appended?
 - Run this command `bitbake-layers show-appends`
 - This would show you a list of all the recipes that has been appended!

### Adding license to a recipe
* Go to `recipes-extendrecipe/appendexample`, here there is a recipe which doesn't have a license. There are some instructions available.
  
* Go to `home/yocto/work/poky/poky/meta/files/common-licenses`
* Search for the license type and run `md5sum license` for example `md5sum MIT`

or you can find the license in your layer with COPYING.MIT

A license is needed for a recipe, otherwise QA will throw an error.
We can find most licenses under `work/poky/poky/meta/files/common-licenses` also referred to as `COMMON_LICENSE_DIR`


Here is a simple starter for how to add to your `.bb` file
```
LIC = "MIT"
LIC_FILES_CHKSUM = "file://${COMMON_LICENSE_DIR}/MIT;md5=0835ade698e0bcf8506ecda2f7b4f302"
```

- Based on this can you add the license `GPLv2.0` to it? 
## Part 1 : Extending a recipe

* Go to `/home/yocto/work/poky/poky/meta-exercises/recipes-extendrecipe/appendexample`
* Create an append for this recipe. This should modify the values of the following variables.

* Set `PR `to `r12`
* Set `PE` to `4`
* Update the value for `CAT1`, `CAT2` and `CAT3` to as you feel like.

Now try to run `bitbake -e appendexample | grep  "^CAT1"` and similar to double check your outputs.

## Part 2: Apply a patch!
* There is a patch file which is present in the `files` folder. 
* What does it do?
* Can you add it to the recipe?

## Part 3 : Setup overrides for a specific task.devt #todo 

## Part 4: Update the existing task  #todo 
* You have to extend a task
 - do_install
 - do_configure and so on

## Part 5 : Add extra files to existing packages #unclear #todo
* Create a c file Called yocto-test.c and add  the following #todo 
* Now include the file in your recipe. 
* Think about log collecting script, install it in the machine. 
* This is similar to adding a patch!
* Files extra path varaible #todo
* 


## Part 6: Package Config #unclear 

 * Package configs are used to customize a reicpe.
	 * Like control some behaviours like run time dependency, buildtime depednecy and so forth.
	 * You can check what it means[ here](https://docs.yoctoproject.org/ref-manual/variables.html#term-PACKAGECONFIG), but don't take too long :P
 * Open `home/yocto/work/poky/poky/meta-exercises/recipes-extendrecipe`
 * There is a recipe here which is causing some mayhem. Can you find out why?
 * Try commenting and uncommenting hte "PACKAGECONFIG ??" varaible maybe you will understand what is going on here!
 



# Optional 

1. [ ] PReferred providers