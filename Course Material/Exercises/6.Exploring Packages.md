# Exercise :  Package Management, Feeds and so on #minoreview 


## Learning Objective #refined
*  Understand how to set package-versioning, revision and epoch and when it is appopriate to do so.
* Learn how to deal with package dependencies.
* Understand the different package formats supports in Yocto.
* Learn how to create package groups
* Learn how to setup a package feed

## Tips
Reuse existing packages or recipes with packages for easy going. #tips
## Part 1: Setting the ground #minoreview 

- Go to a `meta-exercises` and look at the `exercise1` recipe inside the recipes-packaging.
	- Take two files `packages1_1.20.bb` 
	- What is the Package Name `$PN` ?
	1. What is the Package Version `$PV`?
	2. What is the Package Revision `$PR` that is used in this Recipe?
	3. What is the Package Epoch `$PE` of this recipe?
	
* How do you find the info generally for all the packages in the build? #todo 

## Part 2: Change the packaging #minoreview 
1. When you build this recipe using `bitbake packages1` which one do you think gets executed?
2.  Now, take the `packages1_1.10` and change the `PR="2.0"` and try to build now. Do you think this will get built now?
3. What happens when you add "PE" to 3?
   Change the package version, Revision and Epoch [[packages#Setting Package Name, Version, Epoch toberefined]]
   4. Create a bbappend file that would set the `PE="4"` Do you think this would have an impact on the other packages we have?
   5.  Make the package automatically update its version [[packages#Updating Package Version]]



## Part 3: Handling Dependencies

###  Creating a dependency

1. Go to the `packages2` folder and try to add a dependency to a recipe called `magic`  and try to build this recipe. Do you see something strange?
- [ ] Give hints and solution #todo 

### Solving Dependency.
1. In `packages3` folder there is a recipe called packages3.bb, try to rename it to `magic.bb` and try to run `bitbake packages2`, what do you see now? 
2. Now rename the file `magic.bb` back to `packages3.bb`. A recipe can solve another recipe's dependency, maybe there is something hidden in the comments that would solve this issue?

	Once this recipe satisfies that package, the dependency would be solved.
- [ ] Give hints and solution #todo 


## Part 4 : more packaging.
### Generating packages of different formats

1. Enable support for `deb`  [[packages#Setting Package classes]]


## Part 5: Setting up Package feeds #majorreview

* Objective create a local package feed at the ip address where the build server is running


![[Package feeds#Steps]]


## Part6 : oe-pkgdata-util Exploration

1. Explore the contents of the following packages
	- Bash
	- strace

| **Command**                                                   | **Description**                                                                                    | **Example Usage**                                   |
| ------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- | --------------------------------------------------- |
| `oe-pkgdata-util list-pkgs`                                   | Lists all packages built in the current Yocto environment                                          | `oe-pkgdata-util list-pkgs`                         |
| `oe-pkgdata-util list-pkg-files <package-name>`               | Lists all files installed by a specific package                                                    | `oe-pkgdata-util list-pkg-files bash`               |
| `oe-pkgdata-util pkgdata --pkgname <package-name> --licenses` | Shows license-related information for a specific package                                           | `oe-pkgdata-util pkgdata --pkgname bash --licenses` |
| `oe-pkgdata-util pkgdata --pkgname <package-name> --details`  | Shows detailed information about a specific package, including license, dependencies, and metadata | `oe-pkgdata-util pkgdata --pkgname bash --details`  |
| `oe-pkgdata-util check-licenses`                              | Checks for potential license conflicts in the Yocto build                                          | `oe-pkgdata-util check-licenses`                    |
| `oe-pkgdata-util list-pkg-deps <package-name>`                | Lists the dependencies of a specific package                                                       | `oe-pkgdata-util list-pkg-deps bash`                |
  